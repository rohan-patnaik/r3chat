# R3Chat - Product Requirements Document (Updated)

**Created:** 6/11/2025, 9:29:53 PM
**Last Updated:** 6/12/2025, 4:11:03 AM

## 1. Product Vision & Goal

R3Chat is a fast, beautiful, and privacy-respecting AI chat web application. It aims to provide a seamless and highly performant user experience for interacting with various large language models, with a focus on developer and data scientist workflows.

## 2. Key Features & Scope

### 2.1. Theming & UI
*   **Dark Theme:** A visually appealing dark theme with dark blue surfaces and a vibrant magenta accent for key interactive elements.
*   **Color Palette:**
    *   `surface-0`: `#0E1117` (page background)
    *   `surface-1`: `#161B22` (cards, sidebars)
    *   `accent-500`: `#D946EF` (CTAs, toggles, progress)
    *   `accent-600`: `#C03FDD` (hover)
    *   `text-primary`: `#E5E7EB`
    *   `text-secondary`: `#9CA3AF`
    *   `border-subtle`: `#333333`
*   **Responsive Design:** The layout should be optimized for desktop use.

### 2.2. Authentication
*   **Provider:** Google OAuth via Supabase Auth.
*   **Flow:**
    *   Unauthenticated users are redirected to a `/login` page.
    *   Successful login redirects users to the main chat interface.
    *   A logout button will be available to end the session.
*   **Security:** All data-access routes will be protected.

### 2.3. Conversation Management (CRUD)
*   **List Conversations:** Users can see a list of all their past conversations in a sidebar, grouped by date (Today, Yesterday, etc.).
*   **Create Conversation (Deferred Model):**
    *   Clicking "New Chat" will instantly present a clean slate for a new conversation without any delay.
    *   The conversation record is only created in the database *after* the user sends their first message and receives a response.
*   **Update Conversation:**
    *   The conversation title will be automatically generated by the LLM based on the first user message (4 words or less).
    *   Users will be able to manually rename conversations.
*   **Delete Conversation:** Users can delete conversations they no longer need.

### 2.4. Messaging
*   **Send/Receive:** Users can send messages and receive responses from the selected AI model.
*   **Streaming:** AI responses should be streamed token-by-token for a real-time feel.
*   **Model Selection:** Users can select from a list of available models (e.g., Gemini, GPT-4, Claude) for each conversation.

### 2.5. Settings
*   **API Key Management:** Users can securely add and manage their API keys for different AI providers.

## 3. Technical Stack
*   **Framework:** Next.js 15+ (App Router)
*   **Language:** TypeScript
*   **Styling:** Tailwind CSS v4, shadcn/ui
*   **Backend & Database:** Supabase (PostgreSQL)
*   **Authentication:** Supabase Auth
*   **Deployment:** Vercel

## 4. Out of Scope (for v1)
*   Light theme
*   Mobile-first responsive design
*   Team collaboration features
*   File uploads

## 5. Development Roadmap & Status

### Epic 1 – Theming & Setup
*   `1.1` Scaffold Next.js project with TypeScript **(Done)**
*   `1.2` Install Tailwind CSS + shadcn/ui **(Done)**
*   `1.3` Implement global dark-blue surfaces + magenta accent **(Done)**

### Epic 2 – Auth & Layout
*   `2.1` Build the main chat layout skeleton **(Done)**
*   `2.2` Implement Google OAuth flow with Supabase **(Done)**
*   `2.3` Add route protection middleware + logout button **(Done)**

### Epic 3 – Conversation CRUD
*   `3.1` List conversations dynamically from the database **(Done)**
*   `3.2` Create new conversations (deferred model) **(Done)**
*   `3.3` Delete conversations **(Done)**
*   `3.4` Update conversation title (manual rename) **(Done)**

### Epic 4 – Messaging
*   `4.1` Send a message and get a non-streamed response **(Done)**
*   `4.2` Implement streaming responses from the AI model **(Done)**
*   `4.3` Add model selection dropdown functionality **(Next)**

### Epic 5 – Settings
*   `5.1` Create the settings page UI
*   `5.2` Implement API key management (CRUD)